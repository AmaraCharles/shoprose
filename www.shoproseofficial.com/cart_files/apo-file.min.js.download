function handleFile(){var e=function(e,t,a,o,l,i,d,s,r,n){return function e(t,a,o,l,i,d,s,r,n,p){let c=[],u=l.replace("#",""),{is_cropper:m,is_multi_files:f}=p,v=!1,$,_,g,b=1;var h=document.querySelector(`${l}`);if(!h)return;let y=(e,t)=>{x(t);var a=document.querySelector(`input[name="properties[${t}]"]`),o=a.parentElement;for(let l=e.length-1;l>=0;l--){var i=document.createElement("input");i.type="hidden",i.name="properties["+e[l].className+"]",i.value=e[l].url,o.insertBefore(i,a.nextSibling)}},x=e=>{document.querySelectorAll(`input[name^="properties[${e}-"]`).forEach(function(e){e.remove()})},w=e=>{let t=decodeURIComponent(e).split("/");return t[t.length-1].split("_").slice(1).join("_")},S=e=>{let o=document.querySelector(`${l} + .apo-file__img .apo-loader`),i=document.querySelector(`${l} + .apo-file__img .apo-items__preview`);document.querySelector(`input[name="properties[${h.name}]"]`).removeAttribute("value"),o&&o.classList.add("hidden"),i&&i.classList.remove("hidden");let n=d(`#${u}-multiple-upload-preview`);n.empty(),e.forEach((t,a)=>{t.className=`${h.name}-${a+1}`;let o=d("<a>",{href:t.url,target:"_blank",css:{"background-image":`url(${t?.url?new URL(t.url).href:""})`}}),l=d("<div>").addClass("apo-card__loader"),i=d("<div>").addClass("apo-item__info"),s=d("<span>").addClass("apo-item__name").text(t.name),r=d("<div>").addClass("apo-label__image-preview").append(o),p=d("<span>").html("&times;").addClass("apo-item__remove").click(function(){z(a,e)});/(\.csv|\.docx|\.pdf|\.xls|\.xlms|\.xlsx|\.txt|\.ai|\.eps|\.psd)$/i.exec(t.name)||l.append(r),i.append(s),i.append(p),l.append(i),n.append(l)});let p=h.closest(".apo-file");if(p){let c=p.querySelector(".apo_value");c&&(c.value=e.map(e=>e.url).join()),r&&r(h.name,[d(p)],a,t)}y(e,h.name),s(t,a,h.name)},C=e=>{g=e?.url;let o=document.querySelector(`${l} + .apo-file__img .apo-loader`),i=document.querySelector(`${l} + .apo-file__img .apo-items__preview`);o&&o.classList.add("hidden"),i&&i.classList.remove("hidden");let n=d(`#${u}-single-upload-preview`);n.empty();let p=d("<a>",{href:e?.url,target:"_blank",css:{"background-image":`url(${e?.url?new URL(e.url).href:""})`}}),c=d("<div>").addClass("apo-card__loader"),f=d("<button>").addClass("apo-item__crop").val("Recustomize").text("Recustomize Image").click(function(e){e.preventDefault(),document.querySelector(`.${u}.apo-custom-crop-modal`).style.display="flex",$=new Cropper(document.getElementById(`${u}-image`),{viewMode:3,dragMode:"move",aspectRatio:NaN,autoCropArea:0,restore:!1,background:!1,guides:!0,center:!0,highlight:!1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!1})}),_=d("<div>").addClass("apo-item__action").append(f),b=d("<div>").addClass("apo-item__info"),y=d("<span>").addClass("apo-item__name").text(e?.name),x=d("<div>").addClass("apo-label__image-preview").append(p),w=d("<span>").html("&times;").addClass("apo-item__remove").click(function(){q()});/(\.tif|\.tiff|\.csv|\.docx|\.pdf|\.xls|\.xlms|\.xlsx|\.txt|\.ai|\.eps|\.psd)$/i.exec(e?.name)||c.append(x),b.append(y),b.append(w),c.append(b),n.append(c),m&&!v&&n.append(_);let S=h.closest(".apo-file");if(S){let C=S.querySelector(".apo_value");C&&(C.value=e?.url),r&&r(h.name,[d(S)],a,t),t?s(t,a,h.name,e?.url):s(h.name,e?.url)}},q=()=>{document.querySelector(`${l} + .apo-file__img`).remove(),h.value="",g=null,_=null;let e=h.closest(".apo-file");if(e){let o=e.querySelector(".apo_value");o&&(o.value=""),r&&r(h.name,[d(e)],a,t),s(t,a,h.name,"")}},z=(e,o)=>{if(o.splice(e,1),x(h.name),0===o.length){document.querySelector(`${l} + .apo-file__img`).remove(),h.value="";let i=h.closest(".apo-file");if(i){let s=i.querySelector(".apo_value");s&&(s.value=""),r&&r(h.name,[d(i)],a,t)}}S(o)};function A(){let e=document.querySelector(`${l} + .apo-file__img .apo-loader`);e&&e.classList.add("hidden"),document.getElementById(`${u}-apo-crop-modal`).style.display="none",document.getElementById(`${u}-image`).src=_?.src,h.value="",$&&($.destroy(),$=null),s(t,a,h.name,g||""),k()}function B(){if($&&b<3){let e=b+.2;if(e<=3)$.zoom(.2),b=e;else{let t=3-b;$.zoom(t),b=3}}}function E(){if($&&b>1){let e=b+-.2;if(e>=1)$.zoom(-.2),b=e;else{let t=1-b;$.zoom(t),b=1}}}let M=['button[id*="AddToCart"]','button[id*="add-to-cart"]','button[id*="addToCart"]','a[id*="AddToCart"]','a[id*="addToCart"]',".product__add-to-cart-button",".product-submit",".product-form--atc-button",".product-form__cart-submit",".product-buy-buttons--cta",".btn--add-to-cart",".button-cart","button.add-to-cart-btn",".add-to-cart-button","button--addToCart","[data-product-add]",'button[data-pf-type*="ProductATC"]',"[name=add]:not([type=normal])","[type=submit]:not(.spr-button):not(.apo-exclude)",".lh-buy-now",".qview-btn-addtocart",".ajax-submit.action_button.add_to_cart",".action_button.add_to_cart",".atc-btn-container .add_to_cart",".add_to_cart",".button.ajax-submit.action_button",".action_button.add_to_cart",".action_button.add_to_cart",".btn-addtocart",".product-form__submit",".product-form__add-button",".product-form--add-to-cart",".btn--subtle-hover","#product-add-to-cart","#AddToCart",".button--large",".AddtoCart",],L=()=>{for(let e of M){if(document.querySelector(e)){document.querySelector(e).setAttribute("disabled","");break}console.log("APO Not Found Key Button Add To Cart")}let t=document.querySelector(".avis-popupFooter-submit");t&&t.setAttribute("disabled",!0),h.setAttribute("disabled",!0)},k=()=>{for(let e of M)if(document.querySelector(e)){document.querySelector(e).removeAttribute("disabled");break}let t=document.querySelector(".avis-popupFooter-submit");t&&t.removeAttribute("disabled"),h.removeAttribute("disabled")};if(n){let j=`<div class="apo-file__img">
              <div class="apo-loader"></div>
              <div class="apo-items__preview" id="${u}-${f?"multiple":"single"}-upload-preview" hidden">
              </div>
              </div>`;if(h.insertAdjacentHTML("afterend",j),v=!0,f){let T=n.split(",");T.forEach((e,t)=>{c.push({name:w(e),url:e?new URL(e).href:"",className:`${h.name}-${t+1}`})}),S(c)}else{let I={name:w(n),url:n?new URL(n).href:""};C(I)}}h.addEventListener("change",function(){if(!h.files.length){h.value="";return}let e=0+c.reduce((e,t)=>e+t.size,0),t=window.ap_front_settings.config.config_app.appPlan,a=[],o=[],i=/(\.heic|\.jpg|\.jpeg|\.png|\.gif|\.webp|\.tif|\.tiff|\.ico|\.csv|\.docx|\.pdf|\.xls|\.xlms|\.xlsx|\.txt|\.svg|\.ai|\.eps|\.psd)$/i,d=!!/(\.heic|\.jpg|\.jpeg|\.png|\.webp|\.ico|\.svg)$/i.exec(h.files[0].name)&&!!m;for(let s=0;s<h.files.length;s++){let r=h.files[s],n=r.size,p=r.name;i.test(p)?(e+=n,a.push(p)):o.push(p)}let v=e/10485760;if(L(),o.length>0)return alert("Please upload file having extensions .jpeg/.jpg/.png/.gif/.webp/.tif/.tiff/.ico/.csv/.docx/.pdf/.xls/.xlms/.xlsx/.txt/.svg/.ai/.eps/.psd/.heic only."),h.value="",k(),!1;if(v>2&&("BASIC"===t||"OLD"===t||!t))return alert("Please upload file size less than 20MB."),h.value="",k(),!1;if(v>5&&"ADVANCED"===t)return alert("Please upload file size less than 50MB."),h.value="",k(),!1;if(v>10&&"PREMIUM"===t)return alert("Please upload file size less than 100MB."),h.value="",k(),!1;if(h.files&&h.files.length&&f){let g=document.querySelector(`${l} + .apo-file__img`);g&&g.remove();let b=`<div class="apo-file__img">
              <div class="apo-loader"></div>
              <div class="apo-items__preview" id="${u}-multiple-upload-preview" hidden">
                
              </div>
             
              </div>`;h.insertAdjacentHTML("afterend",b);let y=new FormData;for(let x=0;x<h.files.length;x++)y.append("files",h.files[x]);fetch("https://apo-api.avisplus.io/api/sf/upload-multi-file?shop_id="+window.ap_front_settings.shop_id,{method:"POST",mode:"cors",body:y}).then(e=>e.json()).then(e=>{for(let t=0;t<e.data.length;t++)c.push(e.data[t]);h.value="",S(c)}).finally(()=>{k()})}else if(h.files&&h.files[0]&&d){let w=document.createElement("div");w.id=`${u}-apo-crop-modal`,w.className=`${u} apo-custom-crop-modal`,w.innerHTML=`
                <div class="apo-crop-modal-dialog">
                  <div class="apo-crop-modal-content">
                    <div class="apo-crop-modal-header">
                      <p class="apo-crop-modal-title">Crop your images</p>
                      <button type="button" class="apo-crop-modal-close" data-dismiss="modal" aria-label="Close">&times;</button>
                    </div>
                    <div class="apo-crop-modal-body">
                      <img id="${u}-image" src="">
                    </div>
                    <div class="apo-crop-modal-footer">
                      <div class="apo-modal-footer-group left">
                        <button type="button" class="apo-btn-zoom" id="apo-zoom-out-button"><svg class="svg-zoom" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <path d="M289.8 199.7H150.4c-11.3 0-20.4 9.1-20.4 20.4 0 11.3 9.1 20.4 20.4 20.4h139.4c11.3 0 20.4-9.1 20.4-20.4 0-11.3-9.2-20.4-20.4-20.4z"></path>
                            <path d="M220.2 388.2C127.3 388.2 52 313 52 220.1 52 127.3 127.3 52 220.2 52c92.9 0 168.1 75.3 168.1 168.1 0 92.9-75.3 168.1-168.1 168.1zM495 466.1 381.7 352.9c29.7-36.1 47.6-82.4 47.6-132.8C429.3 104.6 335.7 11 220.2 11S11 104.6 11 220.1s93.6 209.1 209.2 209.1c50.4 0 96.6-17.8 132.7-47.5L466.1 495c8 8 20.9 8 28.9 0s8-20.9 0-28.9z"></path>
                          </svg></button>

                        <button type="button" class="apo-btn-zoom" id="apo-zoom-in-button"><svg class="svg-zoom" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <path d="M289.8 200.2h-49.3v-49.3c0-11.3-9.1-20.4-20.4-20.4-11.3 0-20.4 9.1-20.4 20.4v49.3h-49.3c-11.3 0-20.4 9.1-20.4 20.4 0 11.3 9.1 20.4 20.4 20.4h49.3v49.3c0 11.3 9.1 20.4 20.4 20.4 11.3 0 20.4-9.1 20.4-20.4V241h49.3c11.3 0 20.4-9.1 20.4-20.4 0-11.3-9.2-20.4-20.4-20.4z"></path>
                            <path d="M220.2 388.7C127.3 388.7 52 313.5 52 220.6S127.3 52.5 220.2 52.5s168.1 75.3 168.1 168.1S313 388.7 220.2 388.7zm274.8 78L381.7 353.4c29.7-36.1 47.6-82.4 47.6-132.8 0-115.5-93.6-209.2-209.2-209.2S11 105.1 11 220.6s93.6 209.2 209.2 209.2c50.4 0 96.6-17.8 132.7-47.5l113.3 113.3c5.2 5.3 21.1 7.9 28.9 0 7.9-8 7.9-20.9-.1-28.9z"></path>
                          </svg></button>
                      </div>

                      <div class="apo-modal-footer-group right">
                        <button type="button" class="apo-btn-style cancel" id="apo-crop-modal-cancel">Cancel</button>
                        <button type="button" class="apo-btn-style submit" id="apo-crop-button">Save Changes</button>
                      </div>
                    </div>
                  </div>
                </div>`,document.body.insertBefore(w,document.body.firstChild);let q=new FormData;for(let z=0;z<h.files.length;z++)q.append("files",h.files[z]);let M=new FileReader;M.onload=function(e){document.getElementById(`${u}-image`).src=e.target.result,$&&$.destroy(),$=new Cropper(document.getElementById(`${u}-image`),{viewMode:3,dragMode:"move",aspectRatio:NaN,autoCropArea:0,restore:!1,background:!1,guides:!0,center:!0,highlight:!1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!1})},M.readAsDataURL(h.files[0]),document.querySelector(`.${u}.apo-custom-crop-modal`).style.display="flex",document.getElementById("apo-zoom-in-button").addEventListener("click",B),document.getElementById("apo-zoom-out-button").addEventListener("click",E),document.querySelector(".apo-crop-modal-close").addEventListener("click",A),document.getElementById("apo-crop-modal-cancel").addEventListener("click",A),document.getElementById("apo-crop-button").addEventListener("click",function(){!function e(t){let a=$.getData();if(a.width<100||a.height<100){alert("The cropped area is too small. Please select a larger area.");return}t&&(_={name:t.name,type:t.type,src:document.getElementById(`${u}-image`).src});let o=document.querySelector(`${l} + .apo-file__img`);o&&o.remove();let i=`<div class="apo-file__img">
              <div class="apo-loader"></div>
              <div class="apo-items__preview" id="${u}-single-upload-preview" hidden">
                
              </div>
             
              </div>`;h.insertAdjacentHTML("afterend",i);let d=$.getCroppedCanvas();document.getElementById(`${u}-apo-crop-modal`).style.display="none",d.toBlob(e=>{let t=new FormData;t.append("files",e,_.name),t.append("name",_.name),t.append("type",_.type),fetch("https://apo-api.avisplus.io/api/sf/upload-file?shop_id="+window.ap_front_settings.shop_id,{method:"POST",mode:"cors",body:t}).then(e=>e.json()).then(e=>{$.destroy(),h.value="",C(e)}).finally(()=>{k()})},_.type)}(h.files[0])})}else if(h.files&&h.files[0]){var j=document.querySelector(`${l} + .apo-file__img`);j&&j.remove();let T=`
              <div class="apo-file__img">
                <div class="apo-loader"></div>
                <div class="apo-items__preview" id="${u}-single-upload-preview" hidden"></div>
              </div>`;h.insertAdjacentHTML("afterend",T);let I=new FormData;for(let P=0;P<h.files.length;P++)I.append("files",h.files[P]);fetch("https://apo-api.avisplus.io/api/sf/upload-file?shop_id="+window.ap_front_settings.shop_id,{method:"POST",mode:"cors",body:I}).then(e=>e.json()).then(e=>{h.value="",C(e)}).finally(()=>{k()})}})}(e,t,a,o,"function"==typeof l?l():l,i,d,s,r,n)};return e.fileVer="V1.0.0",window.ap_front_settings.file=e,e}handleFile();